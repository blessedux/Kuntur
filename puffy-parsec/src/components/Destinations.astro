---
import { Image } from 'astro:assets'
import 'aos/dist/aos.css'
import AOS from 'aos'

// ‚úÖ Initialize AOS only when the DOM is ready
if (typeof window !== 'undefined') {
  document.addEventListener('DOMContentLoaded', () => {
    console.log('‚úÖ Initializing AOS...')
    AOS.init({
      duration: 800,
      easing: 'ease-in-out',
      once: true
    })

    setTimeout(() => {
      console.log('üîπ AOS refresh triggered')
      AOS.refresh()
    }, 500)
  })
}

// ‚úÖ Define DESTINATIONS array
const DESTINATIONS = [
  {
    id: 'natales',
    src: '/img/natales.webp',
    alt: 'Natales',
    caption: 'Puerto Natales',
    price: '$1899'
  },
  {
    id: 'calafate',
    src: '/img/calafate.webp',
    alt: 'Calafate',
    caption: 'El Calafate',
    price: '$1899'
  },
  {
    id: 'ushuaia',
    src: '/img/ushuaia.webp',
    alt: 'Ushuaia',
    caption: 'Ushuaia, Tierra del Fuego',
    price: '$1899'
  },
  {
    id: 'reserva',
    src: '/img/reserva.webp',
    alt: 'Reserva Magallanes',
    caption: 'Reserva Magallanes',
    price: '$1899'
  },
  {
    id: 'aeropuerto',
    src: '/img/aeropuerto.webp',
    alt: 'Aeropuerto',
    caption: 'Aeropuerto Punta Arenas',
    price: '$1899'
  },
  {
    id: 'fuerte-bulnes',
    src: '/img/fuerte-bulnes.webp',
    alt: 'Fuerte Bulnes',
    caption: 'Fuerte Bulnes',
    price: '$1899'
  },
  {
    id: 'punta-arenas',
    src: '/img/punta-arenas.webp',
    alt: 'Punta Arenas',
    caption: 'Punta Arenas',
    price: '$1899'
  }
]
console.log('‚úÖ DESTINATIONS array loaded:', DESTINATIONS)
---

<!-- ‚úÖ Load JavaScript for scrolling and interactions -->
<script src="/scripts/destinations.js" defer></script>

<section class="relative destinations mt-0 py-16 bg-gray-50" client:load>
  <!-- ‚úÖ Header Section -->
  <div class="text-center relative">
    <h2 class="text-5xl ml-8 text-left font-regular text-gray-900">
      <span class="font-serif italic">Reserva</span> ahora <br /> tu transporte <br
      />privado
    </h2>
    <p class="text-lg ml-8 text-left text-gray-600 my-12">
      Sabemos que necesitas un transporte <br />confiable, r√°pido y seguro.
    </p>
  </div>

  <!-- ‚úÖ Destination Cards -->
  <div class="px-4">
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
      {
        DESTINATIONS.length > 0 ? (
          DESTINATIONS.map((destination, index) => (
            <div
              id={destination.id}
              key={index}
              class="destination-card visible duration-700 overflow-hidden rounded-lg shadow-lg hover:shadow-xl cursor-pointer"
              data-aos-delay={index * 150}
            >
              <div class="relative w-full h-56">
                <Image
                  src={destination.src}
                  alt={destination.alt}
                  width={400}
                  Set
                  a
                  reasonable
                  width
                  height={250}
                  Set
                  a
                  reasonable
                  height
                  format="webp"
                  class="absolute inset-0 w-full h-full object-cover rounded-t-lg"
                />
              </div>
              <div class="p-4 bg-white rounded-b-lg">
                <p class="text-gray-800 font-medium mb-1">
                  {destination.caption}
                </p>
                <div class="flex justify-between items-center">
                  <p class="text-sm text-gray-500">Precio</p>
                  <p class="text-lg font-bold text-gray-800">
                    {destination.price}
                  </p>
                </div>
              </div>
            </div>
          ))
        ) : (
          <p class="text-center text-gray-500">‚ùå No destinations available</p>
        )
      }
    </div>
  </div>
</section>
