---
import { Card } from "./ui/Card";
import "aos/dist/aos.css";
import AOS from "aos";

// ✅ Define the DESTINATIONS array
const DESTINATIONS = [
  { src: "/img/natales.webp", alt: "Natales", caption: "Puerto Natales", price: "$1899" },
  { src: "/img/calafate.webp", alt: "Calafate", caption: "El Calafate", price: "$1899" },
  { src: "/img/ushuaia.webp", alt: "Ushuaia", caption: "Ushuaia, Tierra del Fuego", price: "$1899" },
  { src: "/img/reserva.webp", alt: "Reserva Magallanes", caption: "Reserva Magallanes", price: "$1899" },
  { src: "/img/aeropuerto.webp", alt: "Aeropuerto", caption: "Aeropuerto", price: "$1899" },
  { src: "/img/fuerte-bulnes.webp", alt: "Fuerte Bulnes", caption: "Fuerte Bulnes", price: "$1899" },
  { src: "/img/punta-arenas.webp", alt: "Punta Arenas", caption: "Punta Arenas", price: "$1899" }
];

// ✅ Use Astro client directive to ensure AOS runs in the browser
setTimeout(() => {
  if (typeof window !== "undefined") {
    AOS.init({
      duration: 800, // Animation duration
      easing: "ease-in-out", // Smooth animation
      once: true, // Runs only once per page load
    });
  }
}, 100);
---

<section class="relative mt-0 py-16 bg-gray-50" client:load>
  <!-- Header -->
  <div class="text-center relative">
    <h2 class="text-2xl font-bold text-gray-900">Reserva ahora tu transporte privado</h2>
    <p class="text-md text-gray-600 my-12">Sabemos que necesitas un transporte <br />confiable, rápido y seguro.</p>
  </div>

  <div class="px-4">
    <!-- Cards with AOS Animation -->
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
      {DESTINATIONS.map((destination, index) => (
        <div
  key={index}
  class="overflow-hidden rounded-lg shadow-lg hover:shadow-xl transition-shadow duration-300 cursor-pointer"
  onclick={`openModal('${destination.caption}')`}
  data-aos-delay={index * 150} <!-- Remove "data-aos" to test -->

          <div class="relative w-full h-56">
            <img
              src={destination.src}
              alt={destination.alt}
              class="absolute inset-0 w-full h-full object-cover rounded-t-lg"
            />
          </div>
          <div class="p-4 bg-white rounded-b-lg">
            <p class="text-gray-800 font-medium mb-1">{destination.caption}</p>
            <div class="flex justify-between items-center">
              <p class="text-sm text-gray-500">Precio</p>
              <p class="text-lg font-bold text-gray-800">{destination.price}</p>
            </div>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<script is:inline>
  document.addEventListener("DOMContentLoaded", function () {
    if (typeof AOS !== "undefined") {
      AOS.init({
        duration: 800, // Animation duration
        easing: "ease-in-out", // Smooth animation
        once: true, // Runs only once per page load
      });
    } else {
      console.error("❌ AOS library failed to load.");
    }
  });
</script>
<style>
  /* ✅ Ensure elements are visible even if AOS fails */
  [data-aos] {
    opacity: 1 !important;
    transform: translateY(0) !important;
    visibility: visible !important;
  }
</style>